<div class='modal-dialog'>
    <div class='modal-content'>
        <%= simple_form_for @l3 , remote: true , :html => { :id =>  "add_edit_ecr_form"} do |f| %>
        <%= f.error_notification %>
      <div class='modal-header'>
         <button type='button' class='close' data-dismiss='modal'>Ã—</button>
            <h1 class='h1-heading-popup'> <%=  @action %> <%=@workflow.L3 %>  </h1>
      </div>
      <div class='modal-body' id="add_ecr_modal_body">
        <div class="form-inputs">
  
          <div class= "form-group">
            <div class="row">
              <div class="col-lg-4">
                 <label for = "ecr_station_id" class="pull-right form-group control-label"><%= @workflow.L2 %>:</label>
              </div>
              <div class="col-lg-6">
                <% if @show_projects == 'dropdown' %>
                <select id="l3_l2_id" name="l3[l2_id]" required="required" class="form-control">
                  <option value="">Please Select <%= @workflow.L2 %></option>
                  <% @l1.each do |l1|
                    l1.l2s.each do |l2| %>
                      <option value=<%= l2.id %>><%= l2.name %></option>
                     <% end 
                     end %>   
                </select>
                <% else %>
                <%= f.hidden_field :l2_id, :value => @l2.id %>
                <span class= "pull-left">
                  <%= @l2.name %>
                  </span>
                <% end %> 
              </div>
            </div>
          </div>

          <div class= "form-group">
            <div class="row">
               <div class="col-lg-4">
                   <label for = "ecr_name" class="pull-right form-group echo_patinet control-label">NAME:</label>
              </div>
              <div class="col-lg-6">
                <%= f.input :name ,:label => false,  :input_html =>{id: @show_projects == 'dropdown' ? '' : 'l3_name'} %>
              </div>
                 <script type="text/javascript">
                   setTimeout(function(){
                      console.log('l3-modal');
                      $('#l3_name').focus();
                    }, 300);
                 </script>
            </div>
          </div>

          <div class= "form-group">
            <div class="row">
              <div class="col-lg-4">
                 <label for = "ecr_station_id" class="pull-right form-group control-label">BU</label>
              </div>
              <div class="col-lg-6">
                <select id="l3_l2_id" name="l3[business_unit]" required="required" class="form-control">
                  <option value="">Please Select BU</option>
                  <option value="THV">THV</option> 
                  <option value="HVT">HVT</option>  
                </select>
              </div>
            </div>
          </div>

           <% if @attr_list.present? %>
            <% attr_field_value = ''
            @attr_list.each do |att| 
              if @attr_values.present? 
                attr_value_object = @attr_values.find{|attr_value| attr_value.label_attribute_id == att.id }
                attr_field_value = attr_value_object.present? ? attr_value_object.value : ''
              end %>
            <% if att.field_type == "integer" %>
              <div class="row">
                  <div class="col-lg-4">
                    <label for="Active" class="pull-right echo_patinet form-group"> <%= att.label %>: </label> 
                  </div>
                    <div class="col-lg-6">
                    <input type="number" name=<%= "attr[#{att.id}]" %> <%= att.is_required == true ? 'required' : '' %> class="form-control" value=<%= attr_field_value %> >
                  </div>
                </div>
            <% else %>
              <div class="row">
                <div class="col-lg-4">
                  <label for="Active" class="pull-right echo_patinet form-group"> <%= att.label %>: </label> 
                </div>
                  <div class="col-lg-6">
                   <% if att.is_required? %>
                    <%= select_tag "attr[#{att.id}]", options_from_collection_for_select(att.attribute_options, 'value', 'value', attr_field_value), prompt: "please select #{att.label}", :class=>'form-control pnd-reqst pull-left', required: true %> 
                   <% else %>
                    <%= select_tag "attr[#{att.id}]", options_from_collection_for_select(att.attribute_options, 'value', 'value', attr_field_value), prompt: "please select #{att.label}", :class=>'form-control pnd-reqst pull-left'%> 
                   <% end %>
                  </div>
              </div>
                        
                <% end %>
            <% end %>
          <% end %>

      </div>

    </div>
    <div class="modal-footer">
      <button class="btn btn-danger" data-dismiss="modal" type="button">Close</button>
      <button class="btn save-print-update-edit-btn" type="submit" >
        <%= @btn_action %>
      </button>
    </div>
  <% end %>
</div>
</div>

 <%= javascript_include_tag "modal_form" %>








